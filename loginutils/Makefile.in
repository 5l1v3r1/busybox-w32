# Makefile for busybox
#
# Copyright (C) 1999-2005 by Erik Andersen <andersen@codepoet.org>
#
# Licensed under the GPL v2, see the file LICENSE in this tarball.

srcdir=$(top_srcdir)/loginutils
objdir=$(top_builddir)/loginutils

LOGINUTILS-$(CONFIG_ADDGROUP)	+= addgroup.o
LOGINUTILS-$(CONFIG_ADDUSER)	+= adduser.o
LOGINUTILS-$(CONFIG_GETTY)	+= getty.o
LOGINUTILS-$(CONFIG_LOGIN)	+= login.o
LOGINUTILS-$(CONFIG_PASSWD)	+= passwd.o
LOGINUTILS-$(CONFIG_SU)		+= su.o
LOGINUTILS-$(CONFIG_SULOGIN)	+= sulogin.o
LOGINUTILS-$(CONFIG_VLOCK)	+= vlock.o
LOGINUTILS-$(CONFIG_DELUSER)	+= deluser.o
LOGINUTILS-$(CONFIG_DELGROUP)	+= delgroup.o


LOGINUTILS_SRC-y:=$(patsubst %.o,$(srcdir)/%.c,$(LOGINUTILS-y))
LOGINUTILS_SRC-a:=$(wildcard $(srcdir)/*.c)
APPLET_SRC-y+=$(LOGINUTILS_SRC-y)
APPLET_SRC-a+=$(LOGINUTILS_SRC-a)

needcrypt-y:=
needcrypt-$(CONFIG_LOGIN)	:= y
needcrypt-$(CONFIG_PASSWD)	:= y
needcrypt-$(CONFIG_SU)		:= y
needcrypt-$(CONFIG_SULOGIN)	:= y
needcrypt-$(CONFIG_VLOCK)	:= y
ifeq ($(needcrypt-y),y)
  LIBRARIES := -lcrypt $(filter-out -lcrypt,$(LIBRARIES))
endif

loginutils_OBJ:=  $(patsubst %,$(objdir)/%,$(LOGINUTILS-y))

